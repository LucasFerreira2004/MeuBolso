create table banco (id bigint generated by default as identity, icone_url varchar(255), nome varchar(255), primary key (id));
create table categoria (ativa boolean default true not null, interna_sistema boolean default false not null, id bigint generated by default as identity, cor varchar(255) not null, nome varchar(255) not null, tipo_categoria varchar(255) check (tipo_categoria in ('RECEITA','DESPESA','META')), usuario_id varchar(255) not null, primary key (id), unique (usuario_id, nome));
create table conta (saldo_inicial numeric(38,2) not null, banco_id bigint, id bigint generated by default as identity, tipo_conta_id bigint, descricao varchar(255) not null, usuario_id varchar(255) not null, primary key (id), unique (usuario_id, descricao));
create table meta (progresso numeric(38,2), valor_investido numeric(38,2) not null, valor_meta numeric(38,2) not null, id bigint generated by default as identity, comentario varchar(255), descricao varchar(255) not null, url_img varchar(255), usuario_id varchar(255) not null, primary key (id), unique (usuario_id, descricao));
create table notificacao_meta (notificado boolean, threshold integer, id bigint generated by default as identity, meta_id bigint, primary key (id));
create table notificacao_orcamento (notificado boolean not null, threshold integer, id bigint generated by default as identity, orcamento_id bigint unique, primary key (id));
create table orcamento (ano integer not null, mes integer not null, progresso numeric(38,2), valor_estimado numeric(38,2) not null, valor_gasto numeric(38,2), valor_restante numeric(38,2), categoria_id bigint not null, id bigint generated by default as identity, descricao varchar(255), usuario_id varchar(255) not null, primary key (id), unique (usuario_id, mes, ano, categoria_id));
create table tipo_conta (id bigint generated by default as identity, tipo_conta varchar(255) check (tipo_conta in ('CONTA_CORRENTE','CARTEIRA','POUPANCA','INVESTIMENTOS','OUTRO')), primary key (id));
create table transacao (data DATE not null, valor numeric(38,2) not null, categoria_id bigint not null, conta_origem bigint not null, id bigint generated by default as identity, transacao_recorrente_id bigint, comentario TEXT, descricao TEXT not null, origem_transacao varchar(255) check (origem_transacao in ('NORMAL','FIXA','PARCELADA')), tipo varchar(255) not null check (tipo in ('RECEITA','DESPESA','META')), usuario_id varchar(255) not null, primary key (id), unique (transacao_recorrente_id, data));
create table transacao_meta (id bigint generated by default as identity, meta_id bigint not null, transacao_id bigint not null unique, primary key (id));
create table transacao_recorrente (ativa boolean default true not null, data_cadastro DATE not null, data_final date, qtd_parcelas integer, ultima_execucao date, valor numeric(38,2) not null, categoria_id bigint not null, conta_id bigint not null, id bigint generated by default as identity, descricao varchar(255) not null, periodicidade varchar(255) not null check (periodicidade in ('DIARIO','SEMANAL','MENSAL','ULTIMO_DIA_MES')), tipo varchar(255) not null check (tipo in ('RECEITA','DESPESA','META')), tipo_repeticao varchar(255) not null check (tipo_repeticao in ('FIXO','PARCELAMENTO')), usuario_id varchar(255) not null, primary key (id));
create table usuario (email varchar(255) not null unique, id varchar(255) not null, img_url varchar(255), nome varchar(255) not null, senha varchar(255) not null, primary key (id));
alter table if exists categoria add constraint FK6byc7k2m35w3fwmcba5f0rqtf foreign key (usuario_id) references usuario;
alter table if exists conta add constraint FKk8bnbh61n1vif9wv74uh8je2w foreign key (banco_id) references banco;
alter table if exists conta add constraint FKc6nuq2fjxv7g72nq5284mry9s foreign key (tipo_conta_id) references tipo_conta;
alter table if exists conta add constraint FKmn9bk6wpmnlqyv5i3utmled4c foreign key (usuario_id) references usuario;
alter table if exists meta add constraint FKs7tj4gucc56wbp1lf6ffwgbfr foreign key (usuario_id) references usuario;
alter table if exists notificacao_meta add constraint FK5g10kfg9iafuc3j5ndbwh40nj foreign key (meta_id) references meta;
alter table if exists notificacao_orcamento add constraint FK7v0twc0j8fvnc11a5pw6jbypd foreign key (orcamento_id) references orcamento;
alter table if exists orcamento add constraint FKi2gug8ms1j2n7i9osi4bwss7c foreign key (categoria_id) references categoria;
alter table if exists orcamento add constraint FKgo0mqi1rsea77m28ff3o53b9m foreign key (usuario_id) references usuario;
alter table if exists transacao add constraint FK1i3bdmrp3xf5fvs84gc9w2iid foreign key (categoria_id) references categoria;
alter table if exists transacao add constraint FKknuq5yi1h2sjspj0hd82s6m90 foreign key (conta_origem) references conta;
alter table if exists transacao add constraint FKedgm4n3hrd49da2f01n1f671h foreign key (transacao_recorrente_id) references transacao_recorrente;
alter table if exists transacao add constraint FKnnwmcpelyv6nuwrwixo6ovuv1 foreign key (usuario_id) references usuario;
alter table if exists transacao_meta add constraint FK3tnq9bsw6slktkq301arkr0ld foreign key (meta_id) references meta;
alter table if exists transacao_meta add constraint FKsyq4ygso29pn9ndnqgukttmls foreign key (transacao_id) references transacao;
alter table if exists transacao_recorrente add constraint FKn13ush37914ro3hv636v6sjwa foreign key (categoria_id) references categoria;
alter table if exists transacao_recorrente add constraint FK25nnvex7kn07seua8ygmeqjil foreign key (conta_id) references conta;
alter table if exists transacao_recorrente add constraint FK6uoyigm89g43xef670pjemw6f foreign key (usuario_id) references usuario;
insert into tipo_conta(id, tipo_conta) values ('1', 'conta_corrente');
insert into tipo_conta(id, tipo_conta) values ('2', 'carteira');
insert into tipo_conta(id, tipo_conta) values ('3', 'poupanca');
insert into tipo_conta(id, tipo_conta) values ('4', 'investimentos');
insert into tipo_conta(id, tipo_conta) values ('5', 'outro');
insert into usuario(id, nome, email, senha) values ('2ebbc2f1-bf81-470c-a5f2-063723d99d2c', 'Maria do Rosario Oliveira', 'mariarosariooli@gmail.com', 'oi2u243i');
insert into banco (nome, icone_url) values ('Bradesco', 'https://play-lh.googleusercontent.com/ReQEaxm44OuduIlJEVO_-xs9iZXSyRNdzGKrONYoLSgAdOzyhPKTb1xuuoPXK6tABm0');
insert into banco (nome, icone_url) values ('Banco do Brasil', 'https://play-lh.googleusercontent.com/1-aNhsSPNqiVluwNGZar_7F5PbQ4u1zteuJ1jumnArhe8bfYHHaVwu4aVOF5-NAmLaA');
insert into banco (nome, icone_url) values ('Nubank', 'https://t.ctcdn.com.br/DIEw0gGtQl_GNhWXJwgrRmuGpIk=/i624750.png');
insert into conta(tipo_conta_id, banco_id, usuario_id, descricao, saldo_inicial) values ('1', '3', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c', 'conta01', '10');
insert into conta(tipo_conta_id, banco_id, usuario_id, descricao, saldo_inicial) values ('3', '1', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c', 'conta02', '0');
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('casa', 'despesa', '8755BC', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');             /*1*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('alimentacao', 'despesa', 'BA0707', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');      /*2*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('transporte', 'despesa', 'C19F13', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');       /*3*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('educacao', 'despesa', '33A841', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');         /*4*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('lazer', 'despesa', '57BEA1', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');            /*5*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('roupas', 'despesa', '5797BE', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');           /*6*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('saude', 'despesa', 'C92D78', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');            /*7*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('pagamentos', 'despesa', '818181', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');       /*8*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('salario', 'receita', '33A841', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');          /*9*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('investimentos', 'receita', '0775BA', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');    /*10*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('presente', 'receita', '8755BC', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');         /*11*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('renda extra', 'receita', 'CE601B', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');      /*12*/;
insert into categoria (nome, tipo_categoria, cor, usuario_id) values ('outros', 'receita', 'BC7D18', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');           /*13*/;
insert into transacao (valor, data, descricao, tipo, categoria_id, conta_origem, usuario_id) values ('1000', '2024-12-01', 'venda bicicleta', 'receita', '12', '1', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');
insert into transacao (valor, data, descricao, tipo, categoria_id, conta_origem, usuario_id) values ('16.28', '2024-12-01', 'açaí', 'despesa', '5', '1', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');
insert into transacao (valor, data, descricao, tipo, categoria_id, conta_origem, usuario_id) values ('1412', '2024-12-05', 'salario', 'receita', '9', '2', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');
insert into transacao (valor, data, descricao, tipo, categoria_id, conta_origem, usuario_id) values ('123.55', '2024-12-10', 'conta luz', 'despesa', '1', '1', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');
insert into transacao (valor, data, descricao, tipo, categoria_id, conta_origem, usuario_id) values ('76.20', '2024-12-11', 'conta água', 'despesa', '1', '1', '2ebbc2f1-bf81-470c-a5f2-063723d99d2c');
